!function(){function t(e,n){return t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t(e,n)}function e(e,n){return t(e,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function r(t,i,o){return r=n()?Reflect.construct:function(t,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(t,i));return r&&e(o,r.prototype),o},r.apply(null,arguments)}function i(t,e,n){return r.apply(null,arguments)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){o(t,e,n[e])}))}return t}function s(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){if(Array.isArray(t))return u(t)}function h(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function d(t){return c(t)||h(t)||l(t)||f()}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function m(t){return w(t)}function C(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function b(t,e,n){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=C(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n||t):i.value}},b(t,e,n)}function x(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}function O(t){if(Array.isArray(t))return t}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){return O(t)||h(t)||l(t,e)||k()}function M(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function P(t,e){return!e||"object"!=((n=e)&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof e?y(t):e;var n}function B(t){var e=M();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}var j=function(){"use strict";function t(){v(this,t)}return g(t,[{key:"darken",value:function(t,e,n){return[t,Math.ceil(1.1*e),Math.ceil(.9*n)]}},{key:"arrToHsl",value:function(t){return"hsl(".concat(t[0],", ").concat(t[1],"%, ").concat(t[2],"%)")}}]),t}(),R="hsl(5, 100%, 75%)",E=function(t,e){t.beginPath(),e.forEach((function(e){var n=S(e,2),r=n[0],i=n[1];t.lineTo(r,i)})),t.stroke(),t.closePath(),t.fill()},W=function(t){"use strict";x(n,t);var e=B(n);function n(){var t;return v(this,n),o(y(t=e.apply(this,arguments)),"shadowCoords",[]),t}return g(n,[{key:"setShadowCtx",value:function(t){this.shadowCtx=t}},{key:"setShadowColor",value:function(t){this.shadowColor=t}},{key:"saveBuildingShadow",value:function(t){var e=0,n=t.map((function(n,r){var i=S(n,2),o=i[0],a=i[1];return 0===r||r===t.length-1?(e=a,[o,a]):[o+20,e-a+e]}));this.shadowCoords.push(n)}},{key:"drawOneBuilding",value:function(t){var e,r,i;(e=m(n.prototype),r="drawOneBuilding",i=this,b(e,r,i)).call(this,t),this.saveBuildingShadow(t)}},{key:"setShadowOffset",value:function(t,e){return t.map((function(n,r){var i=S(n,2),o=i[0],a=i[1];return 0===r||r===t.length-1?[o,a]:[o+e,a]}))}},{key:"drawShadows",value:function(t){var e=this;this.shadowCtx.fillStyle=this.shadowColor,this.shadowCtx.strokeStyle="transparent",this.shadowCoords.forEach((function(n){var r=e.setShadowOffset(n,t);E(e.shadowCtx,r)}))}}]),n}(function(){"use strict";function t(e,n){v(this,t),o(this,"minWidth",20),o(this,"offset",{x:0,y:250}),o(this,"rowCount",10),o(this,"color",void 0),this.ctx=e,this.buildingGenerator=n,this.colorHelper=new j}return g(t,[{key:"setInitialColor",value:function(t){this.color=t}},{key:"setOffset",value:function(t){this.offset=t}},{key:"setMinWidth",value:function(t){this.minWidth=t}},{key:"getRandomOffsetX",value:function(t){return Math.floor(Math.random()*this.minWidth+30*t)}},{key:"getBuildingParts",value:function(t){var e=t.map((function(t){var e=S(t,2);return[e[0]-10,e[1]+5]})),n=e.map((function(n,r){var i=S(n,2);return[[i[0],i[1]],t[r],t[r+1]?t[r+1]:t[0],e[r+1]?e[r+1]:e[0]]}));return{backSide:t,frontSide:e,asides:n}}},{key:"drawOneBuilding",value:function(t){var e,n=this,r=this.getBuildingParts(t),i=r.frontSide,o=r.asides;this.ctx.fillStyle=this.colorHelper.arrToHsl((e=this.colorHelper).darken.apply(e,d(this.color))),o.forEach((function(t){E(n.ctx,t)})),this.ctx.fillStyle=this.colorHelper.arrToHsl(this.color),E(this.ctx,i)}},{key:"addOffsetToCoords",value:function(t,e){var n=[];return t.forEach((function(t){var r=S(t,2),i=r[0],o=r[1];n.push([i+e.x,o+e.y])})),n}},{key:"getBuildingType",value:function(t){return t>this.rowCount/3?Math.floor(3*Math.random()+3):Math.floor(5*Math.random()+3)}},{key:"generateRowBuildings",value:function(t,e){var n=this.getBuildingType(e),r=this.buildingGenerator.generateBuilding(n);return t+=this.getRandomOffsetX(e),{buildingCoords:r=this.addOffsetToCoords(r,{x:this.offset.x+t,y:this.offset.y}),offsetX:t+=r[r.length-1][0]-r[0][0]}}},{key:"drawBuildingsRow",value:function(t){this.ctx.strokeStyle="transparent";for(var e,n=0;n+this.offset.x<window.innerWidth;){var r;n=(r=this.generateRowBuildings(n,t)).offsetX,e=r.buildingCoords,this.drawOneBuilding(e)}}},{key:"drawCity",value:function(){for(var t=this.rowCount-1;t>=0;t--){var e;this.buildingGenerator.setHeight(Math.floor(12*Math.random()*t+30));var n=Math.floor(100*Math.random()-200);this.setOffset({x:n,y:this.offset.y+5}),this.drawBuildingsRow(t),this.color=(e=this.colorHelper).darken.apply(e,d(this.color))}}}]),t}()),H=function(){"use strict";function t(){v(this,t)}return g(t,null,[{key:"defineStartPos",value:function(t,e){this.startX=t,this.startY=e}},{key:"defineMinWidth",value:function(t){this.minWidth=t}},{key:"setHeight",value:function(t){this.height=t}},{key:"getNextCoordinates",value:function(t,e,n){return[e,n]}},{key:"generateBuilding",value:function(){for(var t=[this.startX,this.startY],e=[t],n=0;n<this.sideCount;n++)t=this.getNextCoordinates.apply(this,[n].concat(d(t))),e.push(t);return e}}]),t}();o(H,"sideCount",3),o(H,"minWidth",void 0),o(H,"height",void 0),o(H,"startX",void 0),o(H,"startY",void 0);var T=function(t){"use strict";x(n,t);var e=B(n);function n(){return v(this,n),e.apply(this,arguments)}return g(n,null,[{key:"getNextCoordinates",value:function(t,e,n){var r=Math.floor(30*Math.random()+this.minWidth+e),i=t===this.sideCount-1?this.startY:-Math.floor(30*Math.random()+this.height-30);return 0!==t&&t!==this.sideCount-1||(r=e),[r,i]}}]),n}(H);o(T,"sideCount",3);var A=function(t){"use strict";x(n,t);var e=B(n);function n(){return v(this,n),e.apply(this,arguments)}return g(n,null,[{key:"getNextCoordinates",value:function(t,e,n){var r;1!==t&&2!==t||(r=e+20);var i=1===t?n-20:-Math.floor(30*Math.random()+this.height-30);return 2===t&&(i=n),t===this.sideCount-1&&(i=this.startY),0!==t&&t!==this.sideCount-1||(r=e),[r,i]}}]),n}(H);o(A,"sideCount",4);var X=function(t){"use strict";x(n,t);var e=B(n);function n(){return v(this,n),e.apply(this,arguments)}return g(n,null,[{key:"getNextCoordinates",value:function(t,e,n){var r=Math.floor(30*Math.random()+this.minWidth+e),i=t===this.sideCount-1?this.startY:-Math.floor(30*Math.random()+this.height-30);return t%2==0&&(r=e),t%2==1&&(i=n),[r,i]}}]),n}(H);o(X,"sideCount",5);var Y=function(t){"use strict";x(n,t);var e=B(n);function n(){return v(this,n),e.apply(this,arguments)}return g(n,null,[{key:"getNextCoordinates",value:function(t,e,n){var r=Math.floor(30*Math.random()+150+e),i=t===this.sideCount-1?this.startY:n;return 0===t&&(i=-Math.floor(30*Math.random()+this.height-60)),0!==t&&t!==this.sideCount-1||(r=e),[r,i]}}]),n}(H);o(Y,"sideCount",3);var D=function(t){"use strict";x(n,t);var e=B(n);function n(){return v(this,n),e.apply(this,arguments)}return g(n,null,[{key:"getNextCoordinates",value:function(t,e,n){var r=e+35,i=t===this.sideCount-1?this.startY:n-Math.floor(30*Math.random()+this.height);return t%2==0&&(r=e),t%2==1&&(i=n),[r,i]}}]),n}(H);o(D,"sideCount",5);var I=function(){"use strict";function t(e,n){v(this,t),o(this,"minWidth",20),o(this,"height",100),this.startX=e,this.startY=n}return g(t,[{key:"setHeight",value:function(t){this.height=t}},{key:"generateBuilding",value:function(t){switch(H.defineStartPos(this.startX,this.startY),H.defineMinWidth(this.minWidth),H.setHeight(this.height),t){case 3:return T.generateBuilding();case 4:default:return A.generateBuilding();case 5:return X.generateBuilding();case 6:return Y.generateBuilding();case 7:return D.generateBuilding()}}}]),t}(),_=function(){"use strict";function t(e){v(this,t),this.domCanvas=document.getElementById(e),this.domCanvas.width=window.innerWidth,this.domCanvas.height=window.innerHeight,this.ctx=this.domCanvas.getContext("2d")}return g(t,[{key:"updateSize",value:function(){this.domCanvas.width=window.innerWidth,this.domCanvas.height=window.innerHeight}},{key:"setCanvasBackground",value:function(){var t=this.ctx.createLinearGradient(0,0,0,this.domCanvas.height);t.addColorStop(0,"#80deea"),t.addColorStop(.37,"#ffccbc"),t.addColorStop(1,R),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.domCanvas.width,this.domCanvas.height)}}]),t}(),N=function(){"use strict";function t(e){v(this,t),this.ctx=e,this.x=0,this.y=0}return g(t,[{key:"setPosition",value:function(t,e){this.x=t,this.y=e}},{key:"draw",value:function(){this.ctx.fillStyle="#ffffe3",this.ctx.strokeStyle="#ffffe3",this.ctx.beginPath(),this.ctx.arc(this.x,this.y,25,0,2*Math.PI),this.ctx.stroke(),this.ctx.shadowColor="#fffd9e",this.ctx.shadowBlur=50,this.ctx.fill(),this.ctx.shadowBlur=0}}]),t}(),q=function(){"use strict";function t(e,n){v(this,t),this.xMax=e,this.yMax=n,this.radius=Math.round(e/2);var r=Math.round(e/2),i=Math.sqrt(Math.pow(this.radius,2)-Math.pow(0-r,2))-100+n;e<n&&(i=this.radius,this.radius+=100);this.radius>i-50&&(i+=this.radius-i+50),this.center={x:r,y:i},this.x=0}return g(t,[{key:"setXPosition",value:function(t){this.x=t}},{key:"calculateSunPosition",value:function(){var t=-Math.sqrt(Math.pow(this.radius,2)-Math.pow(this.x-this.center.x,2))+this.center.y;return t>this.yMax/2?[]:[this.x,t]}},{key:"calculateShadowOffset",value:function(){return.2*(this.center.x-this.x)}}]),t}(),L=0,z=function(t,e){var n=i(I,d([10,100])),r=new W(t.ctx,n);r.setOffset(s(a({},r.offset),{y:t.domCanvas.height/2})),r.setShadowCtx(e.ctx),r.setInitialColor([231,44,74]),r.setShadowColor(R),r.drawCity(),cancelAnimationFrame(L),function(t,e){var n=e.domCanvas.width,r=e.domCanvas.height,i=r>n?0:150,o=new N(e.ctx),a=new q(n,r),s=function(){var u;e.ctx.clearRect(0,0,n,r),e.setCanvasBackground(),a.setXPosition(i),(u=o).setPosition.apply(u,d(a.calculateSunPosition())),o.draw();var c=a.calculateShadowOffset();t.drawShadows(c),++i<e.domCanvas.width+150&&(L=requestAnimationFrame(s))};L=requestAnimationFrame(s)}(r,e)},F=function(t,e){t.ctx.clearRect(0,0,t.domCanvas.width,t.domCanvas.height),e.ctx.clearRect(0,0,t.domCanvas.width,t.domCanvas.height),z(t,e)};document.addEventListener("DOMContentLoaded",(function(){var t,e,n=new _("shadowsCanvas"),r=new _("cityCanvas");F(r,n),document.querySelector(".generate-btn").addEventListener("click",(function(){return F(r,n)})),t=function(){n.updateSize(),r.updateSize(),F(r,n)},e=!1,window.addEventListener("resize",(function(){clearTimeout(e),e=setTimeout(t,250)}))}))}();
//# sourceMappingURL=index.3be2f49b.js.map
