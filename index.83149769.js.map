{"mappings":"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","sources":["node_modules/@swc/helpers/src/_define_property.mjs","src/ColorHelper.js","src/utils.js","src/buildings/BuildingDrawer.js","src/buildings/ShadowBuildingDrawer.js","src/buildings/BuildingTypes.js","src/buildings/BuildingGenerator.js","src/Canvas.js","src/Sun.js","src/Daytime.js","src/script.js"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","export class ColorHelper {\r\n\r\n  darken(h, s, l) {\r\n    return [h, Math.ceil(s * 1.1), Math.ceil(l * 0.9)];\r\n  };\r\n  \r\n  arrToHsl(arr) {\r\n    return `hsl(${arr[0]}, ${arr[1]}%, ${arr[2]}%)`;\r\n  };\r\n\r\n}\r\n","export const gradientBottom = 'hsl(5, 100%, 75%)';\r\n\r\nexport const drawByCoordinates = (ctx, coords) => {\r\n  ctx.beginPath();\r\n\r\n  coords.forEach(([x, y]) => {\r\n    ctx.lineTo(x, y);\r\n  });\r\n\r\n  ctx.stroke();\r\n  ctx.closePath();\r\n  ctx.fill();\r\n};\r\n","import { ColorHelper } from '../ColorHelper';\r\nimport { drawByCoordinates } from '../utils';\r\n\r\nexport class BuildingDrawer {\r\n  minWidth = 20;\r\n  offset = { x: 0, y: 250 };\r\n  rowCount = 10;\r\n  color;\r\n\r\n  constructor(context, buildingGenerator) {\r\n    this.ctx = context;\r\n    this.buildingGenerator = buildingGenerator;\r\n    this.colorHelper = new ColorHelper();\r\n  }\r\n\r\n  setInitialColor(color) {\r\n    this.color = color;\r\n  }\r\n\r\n  setOffset(offset) {\r\n    this.offset = offset;\r\n  }\r\n\r\n  setMinWidth(minWidth) {\r\n    this.minWidth = minWidth;\r\n  }\r\n\r\n  getRandomOffsetX(step) {\r\n    return Math.floor(Math.random() * this.minWidth + step * 30);\r\n  }\r\n\r\n  getBuildingParts(coords) {\r\n    const frontSide = coords.map(([x, y]) => [x - 10, y + 5]);\r\n    const asides = frontSide.map(([x, y], i) => {\r\n      return [\r\n        [x, y],\r\n        coords[i],\r\n        coords[i + 1] ? coords[i + 1] : coords[0],\r\n        frontSide[i + 1] ? frontSide[i + 1] : frontSide[0],\r\n      ];\r\n    });\r\n\r\n    return {\r\n      backSide: coords,\r\n      frontSide,\r\n      asides,\r\n    };\r\n  }\r\n\r\n  drawOneBuilding(coords) {\r\n    const { frontSide, asides } = this.getBuildingParts(coords);\r\n\r\n    //draw asides\r\n    this.ctx.fillStyle = this.colorHelper.arrToHsl(\r\n      this.colorHelper.darken(...this.color)\r\n    );\r\n    asides.forEach((rectCoords) => {\r\n      drawByCoordinates(this.ctx, rectCoords);\r\n    });\r\n\r\n    //draw front side\r\n    this.ctx.fillStyle = this.colorHelper.arrToHsl(this.color);\r\n    drawByCoordinates(this.ctx, frontSide);\r\n  }\r\n\r\n  addOffsetToCoords(buildingCoords, offset) {\r\n    const result = [];\r\n    buildingCoords.forEach(([x, y]) => {\r\n      result.push([x + offset.x, y + offset.y]);\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getBuildingType(rowIndex) {\r\n    if (rowIndex > this.rowCount / 3) {\r\n      return Math.floor(Math.random() * 3 + 3); // [3; 5]\r\n    }\r\n    return Math.floor(Math.random() * 5 + 3); // [3; 7]\r\n  }\r\n\r\n  generateRowBuildings(offsetX, rowIndex) {\r\n    const type = this.getBuildingType(rowIndex);\r\n    let buildingCoords = this.buildingGenerator.generateBuilding(type);\r\n\r\n    offsetX += this.getRandomOffsetX(rowIndex);\r\n    buildingCoords = this.addOffsetToCoords(buildingCoords, {\r\n      x: this.offset.x + offsetX,\r\n      y: this.offset.y,\r\n    });\r\n    offsetX += buildingCoords[buildingCoords.length - 1][0] - buildingCoords[0][0];\r\n    return {buildingCoords, offsetX};\r\n  }\r\n\r\n  drawBuildingsRow(rowIndex) {\r\n    this.ctx.strokeStyle = 'transparent';\r\n    let offsetX = 0;\r\n    let buildingCoords;\r\n\r\n    while (offsetX + this.offset.x < window.innerWidth) {\r\n      ({ offsetX, buildingCoords } = this.generateRowBuildings(offsetX, rowIndex));\r\n      this.drawOneBuilding(buildingCoords);\r\n    }\r\n  }\r\n\r\n  drawCity() {\r\n    for (let i = this.rowCount - 1; i >= 0; i--) {\r\n      this.buildingGenerator.setHeight(Math.floor(Math.random() * 12 * i + 30));\r\n      const offsetX = Math.floor(Math.random() * 100 - 200);\r\n      this.setOffset({ x: offsetX, y: this.offset.y + 5 });\r\n      this.drawBuildingsRow(i);\r\n      this.color = this.colorHelper.darken(...this.color);\r\n    }\r\n  }\r\n}\r\n","import { BuildingDrawer } from './BuildingDrawer';\r\nimport { drawByCoordinates } from '../utils';\r\n\r\nexport class ShadowBuildingDrawer extends BuildingDrawer {\r\n  shadowCoords = [];\r\n\r\n  setShadowCtx(ctx) {\r\n    this.shadowCtx = ctx;\r\n  }\r\n\r\n  setShadowColor(color) {\r\n    this.shadowColor = color;\r\n  }\r\n\r\n  saveBuildingShadow(coords) {\r\n    let y0 = 0;\r\n    const shadowCoords = coords.map(([x, y], i) => {\r\n      if (i === 0 || i === coords.length - 1) {\r\n        y0 = y;\r\n        return [x, y];\r\n      }\r\n      const diff = y0 - y;\r\n      return [x + 20, diff + y0];\r\n    });\r\n    this.shadowCoords.push(shadowCoords);\r\n  }\r\n\r\n  drawOneBuilding(coords) {\r\n    super.drawOneBuilding(coords);\r\n    this.saveBuildingShadow(coords);\r\n  }\r\n\r\n  setShadowOffset(coords, offset) {\r\n    return coords.map(([x, y], i) => {\r\n      if (i === 0 || i === coords.length - 1) {\r\n        return [x, y];\r\n      }\r\n      return [x + offset, y];\r\n    });\r\n  }\r\n\r\n  drawShadows(offset) {\r\n    this.shadowCtx.fillStyle = this.shadowColor;\r\n    this.shadowCtx.strokeStyle = 'transparent';\r\n    this.shadowCoords.forEach((shadowCoords) => {\r\n      const newCoords = this.setShadowOffset(shadowCoords, offset);\r\n      drawByCoordinates(this.shadowCtx, newCoords);\r\n    });\r\n  }\r\n\r\n}\r\n","export class CommonBuilding {\r\n  static sideCount = 3;\r\n  static minWidth;\r\n  static height;\r\n  static startX;\r\n  static startY;\r\n\r\n  static defineStartPos(startX, startY) {\r\n    this.startX = startX;\r\n    this.startY = startY;\r\n  }\r\n\r\n  static defineMinWidth(minWidth) {\r\n    this.minWidth = minWidth;\r\n  }\r\n\r\n  static setHeight(height) {\r\n    this.height = height;\r\n  }\r\n\r\n  static getNextCoordinates(i, x0, y0) {\r\n    return [x0, y0];\r\n  }\r\n\r\n  static generateBuilding() {\r\n    let current = [this.startX, this.startY];\r\n    let coordinates = [current];\r\n    for (let i = 0; i < this.sideCount; i++) {\r\n      current = this.getNextCoordinates(i, ...current);\r\n      coordinates.push(current);\r\n    }\r\n    return coordinates;\r\n  }\r\n}\r\n\r\nexport class Building3Sides extends CommonBuilding {\r\n  static sideCount = 3;\r\n\r\n  static getNextCoordinates(i, x0, y0) {\r\n    let x = Math.floor(Math.random() * 30 + this.minWidth + x0);\r\n    let y = i === this.sideCount - 1 ? this.startY : -Math.floor(Math.random() * 30 + this.height - 30);\r\n\r\n    if (i === 0 || i === this.sideCount - 1) {\r\n      x = x0;\r\n    }\r\n    return [x, y];\r\n  }\r\n}\r\n\r\nexport class Building4Sides extends CommonBuilding {\r\n  static sideCount = 4;\r\n\r\n  static getNextCoordinates(i, x0, y0) {\r\n    //TODO: refactor, make different height\r\n    let x;\r\n    if (i === 1 || i === 2) {\r\n      x = x0 + 20;\r\n    }\r\n\r\n    //TODO: magic numbers\r\n    let y = i === 1 ? y0 - 20 : -Math.floor(Math.random() * 30 + this.height - 30);\r\n\r\n    if (i === 2) {\r\n      y = y0;\r\n    }\r\n\r\n    if (i === this.sideCount - 1) {\r\n      y = this.startY;\r\n    }\r\n\r\n    if (i === 0 || i === this.sideCount - 1) {\r\n      x = x0;\r\n    }\r\n    return [x, y];\r\n  }\r\n}\r\n\r\nexport class Building5Sides extends CommonBuilding {\r\n  static sideCount = 5;\r\n\r\n  static getNextCoordinates(i, x0, y0) {\r\n    let x = Math.floor(Math.random() * 30 + this.minWidth + x0);\r\n    let y = i === this.sideCount - 1 ? this.startY : -Math.floor(Math.random() * 30 + this.height - 30);\r\n\r\n    if (i % 2 === 0) {\r\n      x = x0;\r\n    }\r\n    if (i % 2 === 1) {\r\n      y = y0;\r\n    }\r\n    return [x, y];\r\n  }\r\n}\r\n\r\nexport class Building3SidesWide extends CommonBuilding {\r\n  static sideCount = 3;\r\n\r\n  static getNextCoordinates(i, x0, y0) {\r\n    let x = Math.floor(Math.random() * 30 + 150 + x0);\r\n    let y = i === this.sideCount - 1 ? this.startY : y0;\r\n    if (i === 0) {\r\n      y = -Math.floor(Math.random() * 30 + this.height - 60);\r\n    }\r\n\r\n    if (i === 0 || i === this.sideCount - 1) {\r\n      x = x0;\r\n    }\r\n    return [x, y];\r\n  }\r\n}\r\n\r\nexport class Building5SidesShort extends CommonBuilding {\r\n  static sideCount = 5;\r\n\r\n  static getNextCoordinates(i, x0, y0) {\r\n    let x = x0 + 35;\r\n    let y = i === this.sideCount - 1 ? this.startY : y0 - Math.floor(Math.random() * 30 + this.height);\r\n\r\n    if (i % 2 === 0) {\r\n      x = x0;\r\n    }\r\n    if (i % 2 === 1) {\r\n      y = y0;\r\n    }\r\n    return [x, y];\r\n  }\r\n}\r\n","import {\r\n  Building3Sides,\r\n  Building3SidesWide,\r\n  Building4Sides,\r\n  Building5Sides,\r\n  Building5SidesShort,\r\n  CommonBuilding,\r\n} from './BuildingTypes';\r\n\r\nexport class BuildingGenerator {\r\n  minWidth = 20;\r\n  height = 100;\r\n\r\n  constructor(startX, startY) {\r\n    this.startX = startX;\r\n    this.startY = startY;\r\n  }\r\n\r\n  setHeight(height) {\r\n    this.height = height;\r\n  }\r\n\r\n  generateBuilding(type) {\r\n    CommonBuilding.defineStartPos(this.startX, this.startY);\r\n    CommonBuilding.defineMinWidth(this.minWidth);\r\n    CommonBuilding.setHeight(this.height);\r\n\r\n    switch (type) {\r\n      case 3:\r\n        return Building3Sides.generateBuilding();\r\n      case 4:\r\n        return Building4Sides.generateBuilding();\r\n      case 5:\r\n        return Building5Sides.generateBuilding();\r\n      case 6:\r\n        return Building3SidesWide.generateBuilding();\r\n      case 7:\r\n        return Building5SidesShort.generateBuilding();\r\n      default:\r\n        return Building4Sides.generateBuilding();\r\n    }\r\n  }\r\n}\r\n","import { gradientBottom } from \"./utils\";\r\n\r\nexport default class Canvas {\r\n  constructor(id) {\r\n    this.domCanvas = document.getElementById(id);\r\n    this.domCanvas.width = window.innerWidth;\r\n    this.domCanvas.height = window.innerHeight;\r\n    this.ctx = this.domCanvas.getContext('2d');\r\n  }\r\n\r\n  updateSize() {\r\n    this.domCanvas.width = window.innerWidth;\r\n    this.domCanvas.height = window.innerHeight;\r\n  }\r\n\r\n  setCanvasBackground() {\r\n    const grd = this.ctx.createLinearGradient(0, 0, 0, this.domCanvas.height);\r\n    grd.addColorStop(0, '#80deea');\r\n    grd.addColorStop(0.37, '#ffccbc');\r\n    grd.addColorStop(1, gradientBottom);\r\n    this.ctx.fillStyle = grd;\r\n    this.ctx.fillRect(0, 0, this.domCanvas.width, this.domCanvas.height);\r\n  }\r\n}\r\n","export class Sun {\r\n  constructor(ctx) {\r\n    this.ctx = ctx;\r\n    this.x = 0;\r\n    this.y = 0;\r\n  }\r\n\r\n  setPosition(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n\r\n  draw() {\r\n    this.ctx.fillStyle = '#ffffe3';\r\n    this.ctx.strokeStyle = '#ffffe3';\r\n\r\n    this.ctx.beginPath();\r\n    this.ctx.arc(this.x, this.y, 25, 0, 2 * Math.PI);\r\n    this.ctx.stroke();\r\n\r\n    this.ctx.shadowColor = \"#fffd9e\";\r\n    this.ctx.shadowBlur = 50;\r\n    this.ctx.fill();\r\n    this.ctx.shadowBlur = 0;\r\n  }\r\n}\r\n","export class Daytime {\r\n  constructor(xMax, yMax) {\r\n    this.xMax = xMax;\r\n    this.yMax = yMax;\r\n    this.radius = Math.round(xMax / 2);\r\n\r\n    let x = Math.round(xMax / 2);\r\n    //by circle formula\r\n    let y = Math.sqrt(this.radius ** 2 - (0 - x) ** 2) - 100 + yMax;\r\n\r\n    //for small screens\r\n    if (xMax < yMax) {\r\n      y = this.radius;\r\n      this.radius += 100;\r\n    }\r\n\r\n    //50 - the sun will be below the top of the screen\r\n    const padding = 50;\r\n    if (this.radius > y - padding) {\r\n      y += this.radius - y + padding;\r\n    }\r\n    this.center = { x, y };\r\n    this.x = 0;\r\n  }\r\n\r\n  setXPosition(x) {\r\n    this.x = x;\r\n  }\r\n\r\n  calculateSunPosition() {\r\n    let y =\r\n      -Math.sqrt(this.radius ** 2 - (this.x - this.center.x) ** 2) +\r\n      this.center.y;\r\n\r\n    if (y > this.yMax / 2) {\r\n      return [];\r\n    }\r\n    return [this.x, y];\r\n  }\r\n\r\n  calculateShadowOffset() {\r\n    return (this.center.x - this.x) * 0.2;\r\n  }\r\n}\r\n","import { ShadowBuildingDrawer } from './buildings/ShadowBuildingDrawer';\r\nimport { BuildingGenerator } from './buildings/BuildingGenerator';\r\nimport Canvas from './Canvas';\r\nimport { gradientBottom } from './utils';\r\nimport { Sun } from './Sun';\r\nimport { Daytime } from './Daytime';\r\n\r\nlet animationFrameId = 0;\r\n\r\nconst startCityAnimation = (buildingDrawer, shadowCanvas) => {\r\n  const width = shadowCanvas.domCanvas.width;\r\n  const height = shadowCanvas.domCanvas.height;\r\n\r\n  let xPosition = height > width ? 0 : 150;\r\n  const sun = new Sun(shadowCanvas.ctx);\r\n  const daytime = new Daytime(width, height);\r\n\r\n  const redrawShadows = () => {\r\n    shadowCanvas.ctx.clearRect(0, 0, width, height);\r\n    shadowCanvas.setCanvasBackground();\r\n\r\n    daytime.setXPosition(xPosition);\r\n    sun.setPosition(...daytime.calculateSunPosition());\r\n    sun.draw();\r\n    const shadowOffset = daytime.calculateShadowOffset();\r\n    buildingDrawer.drawShadows(shadowOffset);\r\n    xPosition++;\r\n    if (xPosition < shadowCanvas.domCanvas.width + 150) {\r\n      animationFrameId = requestAnimationFrame(redrawShadows);\r\n    }\r\n  }\r\n  animationFrameId = requestAnimationFrame(redrawShadows);\r\n}\r\n\r\nconst generate = (cityCanvas, shadowsCanvas) => {\r\n  const startPos = [10, 100];\r\n  const buildingGenerator = new BuildingGenerator(...startPos);\r\n  const buildingDrawer = new ShadowBuildingDrawer(cityCanvas.ctx, buildingGenerator);\r\n  buildingDrawer.setOffset({ ...buildingDrawer.offset, y: cityCanvas.domCanvas.height / 2 });\r\n  buildingDrawer.setShadowCtx(shadowsCanvas.ctx);\r\n  buildingDrawer.setInitialColor([231, 44, 74]);\r\n  buildingDrawer.setShadowColor(gradientBottom);\r\n  buildingDrawer.drawCity();\r\n  \r\n  cancelAnimationFrame(animationFrameId);\r\n  startCityAnimation(buildingDrawer, shadowsCanvas);\r\n};\r\n\r\nconst redraw = (canvas, shadowsCanvas) => {\r\n  canvas.ctx.clearRect(0, 0, canvas.domCanvas.width, canvas.domCanvas.height);\r\n  shadowsCanvas.ctx.clearRect(0, 0, canvas.domCanvas.width, canvas.domCanvas.height);\r\n  generate(canvas, shadowsCanvas);\r\n}\r\n\r\nconst setDebouncedResizeListener = (callback) => {\r\n  let timeout = false;\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(callback, 250);\r\n  });\r\n}\r\n\r\nconst domContentLoaded = () => {\r\n  const shadowsCanvas = new Canvas('shadowsCanvas');\r\n  \r\n  const cityCanvas = new Canvas('cityCanvas');\r\n  redraw(cityCanvas, shadowsCanvas)\r\n\r\n  const generateBtn = document.querySelector('.generate-btn');\r\n  generateBtn.addEventListener('click', () => redraw(cityCanvas, shadowsCanvas));\r\n\r\n  setDebouncedResizeListener(() => {\r\n    shadowsCanvas.updateSize();\r\n    cityCanvas.updateSize();\r\n    redraw(cityCanvas, shadowsCanvas);\r\n  });\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', domContentLoaded);\r\n"],"names":["$1352a3cb9a6e04ed$export$2e2bcd8739ae039","obj","key","value","Object","defineProperty","enumerable","configurable","writable","$5953f2b32375bd9b$export$a33ddd5b3ba7b208","darken","h","s","l","Math","ceil","arrToHsl","arr","$858c98665228d451$export$19569ecf3fea9749","ctx","coords","beginPath","forEach","x","y","lineTo","stroke","closePath","fill","$f8ab101eaccf6251$export$7caab627ce808bb5","setInitialColor","color","this","setOffset","offset","setMinWidth","minWidth","getRandomOffsetX","step","floor","random","getBuildingParts","frontSide","map","asides","i","backSide","drawOneBuilding","fillStyle","colorHelper","rectCoords","addOffsetToCoords","buildingCoords","result","push","getBuildingType","rowIndex","rowCount","generateRowBuildings","offsetX","type","buildingGenerator","generateBuilding","length","drawBuildingsRow","strokeStyle","window","innerWidth","drawCity","setHeight","constructor","context","$6f41bd828e619fdb$export$8024efb538d8cb3a","setShadowCtx","shadowCtx","setShadowColor","shadowColor","saveBuildingShadow","y0","shadowCoords","super","setShadowOffset","drawShadows","newCoords","$f5714b4fd2bb4cf7$export$803a633243d9053a","static","startX","startY","height","x0","current","coordinates","sideCount","getNextCoordinates","$f5714b4fd2bb4cf7$export$2b82bfd274efb4f6","$f5714b4fd2bb4cf7$export$b0290670d1440dd1","$f5714b4fd2bb4cf7$export$41946dddce718a9d","$f5714b4fd2bb4cf7$export$1d540f8e493cb065","$f5714b4fd2bb4cf7$export$6d279ca24f5dcfdc","$bd77aa91cd61acbf$export$53d6f2713bf598f7","defineStartPos","defineMinWidth","$d8b6f065d2fa190c$export$2e2bcd8739ae039","updateSize","domCanvas","width","innerHeight","setCanvasBackground","grd","createLinearGradient","addColorStop","fillRect","id","document","getElementById","getContext","$ae36daa08ec5d284$export$a059d7a0f1f6fc48","setPosition","draw","arc","PI","shadowBlur","$09f9384594b5f036$export$581423aa6c1d03dc","setXPosition","calculateSunPosition","sqrt","radius","center","yMax","calculateShadowOffset","xMax","round","$68bd0e1bd767befc$var$animationFrameId","$68bd0e1bd767befc$var$generate","cityCanvas","shadowsCanvas","buildingDrawer","cancelAnimationFrame","shadowCanvas","xPosition","sun","daytime","redrawShadows","clearRect","shadowOffset","requestAnimationFrame","$68bd0e1bd767befc$var$startCityAnimation","$68bd0e1bd767befc$var$redraw","canvas","addEventListener","querySelector","callback","timeout","clearTimeout","setTimeout","$68bd0e1bd767befc$var$setDebouncedResizeListener"],"version":3,"file":"index.83149769.js.map"}